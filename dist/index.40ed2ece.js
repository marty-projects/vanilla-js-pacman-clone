function e(e,t,o,s){Object.defineProperty(e,t,{get:o,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},r={},i=o.parcelRequire5fed;null==i&&((i=function(e){if(e in s)return s[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return s[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},o.parcelRequire5fed=i),i.register("27Lyk",(function(t,o){var s,r;e(t.exports,"register",(()=>s),(e=>s=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var i={};s=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)i[t[o]]=e[t[o]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("27Lyk").register(JSON.parse('{"2BF4I":"index.40ed2ece.js","bh2Wq":"munch.cf16ce27.mp3","aCJjn":"pill.37250d80.mp3","hm2FA":"game_start.6c76d58f.mp3","jPpmz":"death.ce88f37f.mp3","2AP9z":"eat_ghost.0e274b38.mp3"}'));const n={ArrowLeft:{code:37,movement:-1,rotation:180},ArrowUp:{code:38,movement:-20,rotation:270},ArrowRight:{code:39,movement:1,rotation:0},ArrowDown:{code:40,movement:20,rotation:90}},a={BLANK:"blank",WALL:"wall",DOT:"dot",BLINKY:"blinky",PINKY:"pinky",INKY:"inky",CLYDE:"clyde",PILL:"pill",PACMAN:"pacman",GHOST:"ghost",SCARED:"scared",GHOSTLAIR:"lair"},d=[a.BLANK,a.WALL,a.DOT,a.BLINKY,a.PINKY,a.INKY,a.CLYDE,a.PILL,a.PACMAN,a.GHOSTLAIR],c=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,0,0,0,1,2,1,2,2,2,2,2,2,2,2,1,2,1,0,0,0,0,0,0,1,2,1,2,1,9,9,9,9,1,2,1,2,1,0,0,0,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,1,0,0,0,2,2,2,1,9,9,9,9,1,2,2,2,0,0,0,1,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,0,0,0,1,2,1,2,1,1,1,1,1,1,2,1,2,1,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,2,1,2,1,0,0,0,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function l(e,t,o){let s=t,r=e+s.movement;const i=Object.keys(n);for(;o(r,a.WALL)||o(r,a.GHOST);){const t=i[Math.floor(Math.random()*i.length)];s=n[t],r=e+s.movement}return{nextMovePos:r,direction:s}}var h=class{constructor(e){this.dotCount=0,this.grid=[],this.DOMGrid=e}showGameStatus(e){const t=document.createElement("div");t.classList.add("game-status"),t.innerHTML=""+(e?"WIN!":"GAME OVER"),this.DOMGrid.appendChild(t)}createGrid(e){this.dotCount=0,this.grid=[],this.DOMGrid.innerHTML=" ",this.DOMGrid.style.cssText="grid-template-columns: repeat(20, 20px)",e.forEach((e=>{const t=document.createElement("div");t.classList.add("square",d[e]),t.style.cssText="width: 20px; height: 20px;",this.DOMGrid.appendChild(t),this.grid.push(t),d[e]===a.DOT&&this.dotCount++}))}addObject(e,t){this.grid[e].classList.add(...t)}removeObject(e,t){this.grid[e].classList.remove(...t)}objectExists=(e,t)=>this.grid[e].classList.contains(t);rotateDiv(e,t){this.grid[e].style.transform=`rotate(${t}deg)`}moveCharacter(e){if(e.shouldMove()){const{nextMovePos:t,direction:o}=e.getNextMove(this.objectExists),{classesToRemove:s,classesToAdd:r}=e.makeMove();e.rotation&&t!==e.pos&&(this.rotateDiv(t,e.dir.rotation),this.rotateDiv(e.pos,0)),this.removeObject(e.pos,s),this.addObject(t,r),e.setNewPos(t,o)}}static createGameboard(e,t){const o=new this(e);return o.createGrid(t),o}};var m=class{constructor(e,t){this.pos=t,this.speed=e,this.dir=null,this.timer=0,this.powerPill=!1,this.rotation=!0}shouldMove(){return!!this.dir&&(this.timer===this.speed?(this.timer=0,!0):void this.timer++)}getNextMove(e){let t=this.pos+this.dir.movement;return(e(t,a.WALL)||e(t,a.GHOSTLAIR))&&(t=this.pos),{nextMovePos:t,direction:this.dir}}makeMove(){return{classesToRemove:[a.PACMAN],classesToAdd:[a.PACMAN]}}setNewPos(e){this.pos=e}handleKeyInput(e,t){let o;if(!(e.keyCode>=37&&e.keyCode<=40))return;o=n[e.key];const s=this.pos+o.movement;t(s,a.WALL)||t(s,a.GHOSTLAIR)||(this.dir=o)}};var u,p=class{constructor(e=5,t,o,s){this.name=s,this.movement=o,this.startPos=t,this.pos=t,this.dir=n.ArrowRight,this.speed=e,this.timer=0,this.isScared=!1,this.rotation=!1}shouldMove(){return this.timer===this.speed?(this.timer=0,!0):(this.timer++,!1)}getNextMove(e){const{nextMovePos:t,direction:o}=this.movement(this.pos,this.dir,e);return{nextMovePos:t,direction:o}}makeMove(){const e=[a.GHOST,a.SCARED,this.name];let t=[a.GHOST,this.name];return this.isScared&&(t=[...t,a.SCARED]),{classesToRemove:e,classesToAdd:t}}setNewPos(e,t){this.pos=e,this.dir=t}};u=new URL(i("27Lyk").resolve("bh2Wq"),import.meta.url).toString();var v;v=new URL(i("27Lyk").resolve("aCJjn"),import.meta.url).toString();var L;L=new URL(i("27Lyk").resolve("hm2FA"),import.meta.url).toString();var f;f=new URL(i("27Lyk").resolve("jPpmz"),import.meta.url).toString();var A;A=new URL(i("27Lyk").resolve("2AP9z"),import.meta.url).toString();const w=document.querySelector("#game"),b=document.querySelector("#score"),g=document.querySelector("#start-button"),O=h.createGameboard(w,c);let P=0,y=null,M=!1,S=!1,E=null;function T(e){new Audio(e).play()}function C(e){T(t(f)),document.removeEventListener("keydown",(t=>e.handleKeyInput(t,O.objectExists.bind(O)))),O.showGameStatus(M),clearInterval(y),g.classList.remove("hide")}function x(e,o){O.moveCharacter(e),o.forEach((e=>O.moveCharacter(e))),function(e,o){const s=o.find((t=>e.pos===t.pos));s&&(e.powerPill?(T(t(A)),O.removeObject(s.pos,[a.GHOST,a.SCARED,s.name]),s.pos=s.startPos,P+=100):(O.removeObject(e.pos,[a.PACMAN]),O.rotateDiv(e.pos,0),C(e)))}(e,o),O.objectExists(e.pos,a.DOT)&&(T(t(u)),O.removeObject(e.pos,[a.DOT]),O.dotCount--,P+=10),O.objectExists(e.pos,a.PILL)&&(T(t(v)),O.removeObject(e.pos,[a.PILL]),e.powerPill=!0,P+=50,clearTimeout(E),E=setTimeout((()=>()=>e.powerPill=!1),1e4)),e.powerPill!==S&&(S=e.powerPill,o.forEach((t=>t.isScared=e.powerPill))),0===O.dotCount&&(M=!0,C(e)),b.innerHTML=P}g.addEventListener("click",(function(){T(t(L)),M=!1,S=!1,P=0,g.classList.add("hide"),O.createGrid(c);const e=new m(2,287);O.addObject(287,[a.PACMAN]),document.addEventListener("keydown",(t=>e.handleKeyInput(t,O.objectExists)));const o=[new p(5,188,l,a.BLINKY),new p(4,209,l,a.PINKY),new p(3,230,l,a.INKY),new p(2,251,l,a.CLYDE)];y=setInterval((()=>x(e,o)),80)}));
//# sourceMappingURL=index.40ed2ece.js.map
